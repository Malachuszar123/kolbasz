游릭游릭游릭2. REGISZTR츼CI칍游릭游릭游릭
jobb katt a nev칠re > Add > Window WPF... > elnevezed

游릭GRID: 450x450
        <TextBlock HorizontalAlignment="Left" Margin="32,84,0,0" TextWrapping="Wrap" VerticalAlignment="Top" FontSize="20"><Run Language="hu-hu" Text="Felhaszn치l칩n칠v:"/></TextBlock>
        <TextBox x:Name="felh" HorizontalAlignment="Left" Margin="207,84,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="187" FontSize="20"/>
        <TextBlock HorizontalAlignment="Left" Margin="32,149,0,0" TextWrapping="Wrap" VerticalAlignment="Top" FontSize="20"><Run Language="hu-hu" Text="Jelsz칩:"/></TextBlock>
        <TextBox x:Name="jel" HorizontalAlignment="Left" Margin="207,149,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="187" FontSize="20"/>
        <TextBlock HorizontalAlignment="Center" Margin="0,10,0,0" TextWrapping="Wrap" VerticalAlignment="Top" FontSize="36"><Run Language="hu-hu" Text="Regisztr치ci칩"/></TextBlock>
        <Button x:Name="reg" Content="Regisztr치ci칩" HorizontalAlignment="Center" Margin="0,217,0,0" VerticalAlignment="Top" FontSize="20"/>
        <Button x:Name="bej" Content="Ink치bb bejelentkezek" HorizontalAlignment="Center" Margin="0,267,0,0" VerticalAlignment="Top" FontSize="20"/>
        <Button x:Name="kil" Content="Kil칠p칠s" HorizontalAlignment="Center" Margin="0,355,0,0" VerticalAlignment="Top" FontSize="20"/>

游릭ezt a k칩d tetej칠re, ezzel csak 1x hivatkozol az sql-re 칠s mindenhol m콤k칬dik
public partial class Regi : Window
{
    public MySqlConnection connection; //ez az 칰j
    public Regi()
    {
        InitializeComponent();
        InitializeDbConn();  //ez az 칰j
    }

    private void InitializeDbConn()  //ez az 칰j
    {  //ez az 칰j
        string connectionString = "Server=localhost; Database=vannevesjelszo; Uid=root; Pwd=;";  //ez az 칰j
        connection = new MySqlConnection(connectionString);  //ez az 칰j
    }  //ez az 칰j

游릭regisztr치ci칩s gomb:
private void reg_Click(object sender, object e)
{
    string felhasznalonev = felh.Text;
    string jelszo = jel.Text;

        string connectionString = "Server=localhost; Database=vannevesjelszo; Uid=root; Pwd=;"; //ha m치r 1x hivatlpzt치l az sql-re akkor ez nem kell
        MySqlConnection connection = new MySqlConnection(connectionString); //ez se

    try
    {
        connection.Open();
        // Ellen콈rizz칲k, hogy a felhaszn치l칩n칠v m치r l칠tezik-e az adatb치zisban
        string checkQuery = "SELECT COUNT(*) FROM felhasznalok WHERE nev=@felh";
        MySqlCommand checkCommand = new MySqlCommand(checkQuery, connection);
        checkCommand.Parameters.AddWithValue("@felh", felhasznalonev); //a nev oszlopban van-e m치r olyan felhaszn치l칩 ellen콈rz칠se
        int userCount = Convert.ToInt32(checkCommand.ExecuteScalar());

        if (userCount > 0)
        {
            MessageBox.Show("A felhaszn치l칩n칠v m치r l칠tezik. K칠rlek, v치lassz m치sikat!");
            return;
        }

        // Ha a felhaszn치l칩n칠v m칠g nem l칠tezik, besz칰rjuk az adatb치zisba
        string insertQuery = "INSERT INTO felhasznalok (nev, jelszo) VALUES (@felh, @jel)"; //()-ben az oszlopok nevei, @ ut치n textbox nevei
        MySqlCommand insertCommand = new MySqlCommand(insertQuery, connection);
        insertCommand.Parameters.AddWithValue("@felh", felhasznalonev); 
        insertCommand.Parameters.AddWithValue("@jel", jelszo); // @ textbox, oszlop neve
        int rowsAffected = insertCommand.ExecuteNonQuery();

        if (rowsAffected > 0)
        {
            MessageBox.Show("Sikeres regisztr치ci칩!"); //치t visz a bejelentkez칠sre
            var regWindow = new MainWindow();
            regWindow.Show();
            Close();
        }
        else
        {
            MessageBox.Show("A regisztr치ci칩 sor치n hiba t칬rt칠nt. K칠rlek, pr칩b치ld 칰jra!");
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show("Hiba t칬rt칠nt az adatb치zis kapcsol칩d치sakor: " + ex.Message);
    }
    finally
    {
        if (connection.State == ConnectionState.Open)
            connection.Close();
    }
}

游릭츼tv치lt치s a bejelentkez칠sre:
      private void bej_Click(object sender, RoutedEventArgs e)
{
    {
        var regWindow = new MainWindow();
        regWindow.Show();
        Close();
    }
}

游릭游릭游릭游릭游릭游릭游릭游릭游릭游릭游릭游릭
