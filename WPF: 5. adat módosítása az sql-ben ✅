ğŸ”µğŸ”µğŸ”µ5. adat mÃ³dosÃ­tÃ¡sa az sql-benğŸ”µğŸ”µğŸ”µ

ğŸ”µesetleges GRID:
 <Button x:Name="atirat" Content="ÃtÃ­rÃ¡s" HorizontalAlignment="Left" Margin="616,253,0,0" VerticalAlignment="Top" FontSize="20" Click="Button_Click_1"/>
 <TextBox x:Name="dnev" HorizontalAlignment="Left" Margin="541,83,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="231" FontSize="20"/>
 <TextBox x:Name="dszul" HorizontalAlignment="Left" Margin="541,120,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="231" FontSize="20"/>
 <TextBox x:Name="dmunk" HorizontalAlignment="Left" Margin="541,156,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="231" FontSize="20"/>
 <TextBox x:Name="dtel" HorizontalAlignment="Left" Margin="541,194,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="231" FontSize="20"/>
 <TextBlock HorizontalAlignment="Left" Margin="541,30,0,0" TextWrapping="Wrap" VerticalAlignment="Top" FontSize="20"><Run Language="hu-hu" Text="Adatok mÃ³dosÃ­tÃ¡sa"/></TextBlock>
 <TextBlock HorizontalAlignment="Left" Margin="405,83,0,0" TextWrapping="Wrap" VerticalAlignment="Top" FontSize="20"><Run Language="hu-hu" Text="NÃ©v:"/></TextBlock>
 <TextBlock HorizontalAlignment="Left" Margin="405,120,0,0" TextWrapping="Wrap" VerticalAlignment="Top" FontSize="20"><Run Language="hu-hu" Text="SzÃ¼letÃ©si d:"/></TextBlock>
 <TextBlock HorizontalAlignment="Left" Margin="405,158,0,0" TextWrapping="Wrap" VerticalAlignment="Top" FontSize="20"><Run Language="hu-hu" Text="Munka:"/></TextBlock>
 <TextBlock HorizontalAlignment="Left" Margin="405,194,0,0" TextWrapping="Wrap" VerticalAlignment="Top" FontSize="20"><Run Language="hu-hu" Text="Telefon:"/></TextBlock>
 <ComboBox x:Name="lista" HorizontalAlignment="Left" Margin="141,67,0,0" VerticalAlignment="Top" Width="120" SelectionChanged="lista_SelectionChanged"/>

ğŸ”µ1x sql hivatkozÃ¡s:
public partial class Regi : Window
{
    public MySqlConnection connection; //ez az Ãºj
    public Neve()
    {
        InitializeComponent();
        InitializeDbConn();  //ez az Ãºj
    }

    private void InitializeDbConn()  //ez az Ãºj
    {  //ez az Ãºj
        string connectionString = "Server=localhost; Database=vannevesjelszo; Uid=root; Pwd=;";  //ez az Ãºj
        connection = new MySqlConnection(connectionString);  //ez az Ãºj
    }  //ez az Ãºj

ğŸ”µa fillcombobox-ot feltÃ¶tljÃ¼k:
private void FillComboBox()
{
    try
    {
        connection.Open();
        string query = "SELECT dnev FROM dolgozok";
        command.CommandText = query;
        using (MySqlDataReader reader = command.ExecuteReader())
        {
            while (reader.Read())
            {
                lista.Items.Add(reader["dnev"].ToString());
            }
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show("Hiba tÃ¶rtÃ©nt az adatbÃ¡zis kapcsolat sorÃ¡n: " + ex.Message);
    }
    finally
    {
        connection.Close();
    }
}

ğŸ”µaz Ã¡tirat gomb kÃ³dja:
private void Button_Click_1(object sender, RoutedEventArgs e)
{
    if (!ValidateInputs()) return;

    try
    {
        connection.Open();
        string query = "UPDATE dolgozok SET ";

        if (!string.IsNullOrWhiteSpace(teljesneve.Text))
        {
            query += "dnev = @teljesneve, ";
            command.Parameters.AddWithValue("@teljesneve", teljesneve.Text);
        }

        if (!string.IsNullOrWhiteSpace(szuldatum.Text))
        {
            query += "dszul = @szuldatum, ";
            command.Parameters.AddWithValue("@szuldatum", szuldatum.Text);
        }

        if (!string.IsNullOrWhiteSpace(munkaneve.Text))
        {
            query += "dmunk = @munkaneve, ";
            command.Parameters.AddWithValue("@munkaneve", munkaneve.Text);
        }

        if (!string.IsNullOrWhiteSpace(telefonszama.Text))
        {
            query += "dtel = @telefonszama, ";
            command.Parameters.AddWithValue("@telefonszama", telefonszama.Text);
        }

        query = query.TrimEnd(',', ' ') + " WHERE dnev = @teljesneve_update";
        command.Parameters.AddWithValue("@teljesneve_update", lista.SelectedItem.ToString());

        command.CommandText = query;

        int rowsAffected = command.ExecuteNonQuery();
        if (rowsAffected > 0)
        {
            MessageBox.Show("Adatok sikeresen mÃ³dosÃ­tva.");
        }
        else
        {
            MessageBox.Show("Nem sikerÃ¼lt mÃ³dosÃ­tani az adatokat.");
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show("Hiba tÃ¶rtÃ©nt az adatok mÃ³dosÃ­tÃ¡sa sorÃ¡n: " + ex.Message);
    }
    finally
    {
        connection.Close();
    }
}

ğŸ”µhogyha szeretnÃ©d ellenÅ‘rÃ­zetni, hogy mindegyik mezÅ‘be helyesek-e a formÃ¡tumok:
        private bool ValidateInputs()
        {
            if (!string.IsNullOrWhiteSpace(szuldatum.Text) && !DateTime.TryParseExact(szuldatum.Text, "yyyy-MM-dd", CultureInfo.InvariantCulture, DateTimeStyles.None, out _))
            {
                MessageBox.Show("A szÃ¼letÃ©si dÃ¡tum formÃ¡tuma helytelen (Ã©v-hÃ³-nap, pl. 2024-05-20).");
                return false;
            }

            if (!string.IsNullOrWhiteSpace(telefonszama.Text) && !long.TryParse(telefonszama.Text, out _))
            {
                MessageBox.Show("A telefonszÃ¡m csak szÃ¡mokat tartalmazhat.");
                return false;
            }

            return true;
        }

ğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µa mÃ³dosÃ­tÃ¡sban is meglehet azt csinÃ¡lni hogy ahova szÃ¡m kell oda csak szÃ¡m Ã©s ahova betÅ± oda csak betÅ± mehet
ellenÅ‘rzÅ‘ kÃ³drÃ©szt megcsinÃ¡nlniğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µ

ğŸ”µilletve csak simÃ¡n ez legyen itt:
        private void lista_SelectionChanged(object sender, System.Windows.Controls.SelectionChangedEventArgs e)
        {

        }
ğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µ
