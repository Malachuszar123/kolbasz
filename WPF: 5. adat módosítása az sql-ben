游댯游댯游댯5. adat m칩dos칤t치sa az sql-ben游댯游댯游댯

游댯fentre ezeket alkalmazzuk:
public partial class adatatiras : Window
{ //ez al치 be kell rakni az sql csatlakoz치st
    private string connectionString = "Server=localhost;Database=vannevesjelszo;Uid=root;Pwd=;";

游댯esetleges GRID:
 <Button x:Name="atirat" Content="츼t칤r치s" HorizontalAlignment="Left" Margin="616,253,0,0" VerticalAlignment="Top" FontSize="20" Click="Button_Click_1"/>
 <TextBox x:Name="dnev" HorizontalAlignment="Left" Margin="541,83,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="231" FontSize="20"/>
 <TextBox x:Name="dszul" HorizontalAlignment="Left" Margin="541,120,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="231" FontSize="20"/>
 <TextBox x:Name="dmunk" HorizontalAlignment="Left" Margin="541,156,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="231" FontSize="20"/>
 <TextBox x:Name="dtel" HorizontalAlignment="Left" Margin="541,194,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="231" FontSize="20"/>
 <TextBlock HorizontalAlignment="Left" Margin="541,30,0,0" TextWrapping="Wrap" VerticalAlignment="Top" FontSize="20"><Run Language="hu-hu" Text="Adatok m칩dos칤t치sa"/></TextBlock>
 <TextBlock HorizontalAlignment="Left" Margin="405,83,0,0" TextWrapping="Wrap" VerticalAlignment="Top" FontSize="20"><Run Language="hu-hu" Text="N칠v:"/></TextBlock>
 <TextBlock HorizontalAlignment="Left" Margin="405,120,0,0" TextWrapping="Wrap" VerticalAlignment="Top" FontSize="20"><Run Language="hu-hu" Text="Sz칲let칠si d:"/></TextBlock>
 <TextBlock HorizontalAlignment="Left" Margin="405,158,0,0" TextWrapping="Wrap" VerticalAlignment="Top" FontSize="20"><Run Language="hu-hu" Text="Munka:"/></TextBlock>
 <TextBlock HorizontalAlignment="Left" Margin="405,194,0,0" TextWrapping="Wrap" VerticalAlignment="Top" FontSize="20"><Run Language="hu-hu" Text="Telefon:"/></TextBlock>
 <ComboBox x:Name="lista" HorizontalAlignment="Left" Margin="141,67,0,0" VerticalAlignment="Top" Width="120" SelectionChanged="lista_SelectionChanged"/>

游댯m칠g add hozz치 ezeket:
    public partial class adatatiras : Window
    {
        private string connectionString = "Server=localhost;Database=vannevesjelszo;Uid=root;Pwd=;"; //ezt a sort musaj ide kintre rakni!!
        public adatatiras()
        {
            InitializeComponent();
            FillComboBox(); //ezt 칤rd ide
        }

游댯a fillcombobox-ot felt칬tlj칲k:
private void FillComboBox()
{
    try
    {
        using (MySqlConnection connection = new MySqlConnection(connectionString))
        {
            connection.Open();
            string query = "SELECT dnev FROM dolgozok";
            MySqlCommand command = new MySqlCommand(query, connection);
            MySqlDataReader reader = command.ExecuteReader();
            while (reader.Read())
            {
                lista.Items.Add(reader["dnev"].ToString());
            }
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show("Hiba t칬rt칠nt az adatb치zis kapcsolat sor치n: " + ex.Message);
    }
}

游댯az 치tirat gomb k칩dja:
 private void Button_Click_1(object sender, RoutedEventArgs e)
 {
     try
     {

         using (MySqlConnection connection = new MySqlConnection(connectionString))
         {
             connection.Open();
             string query = "UPDATE dolgozok SET ";
             MySqlCommand command = new MySqlCommand();

             if (!string.IsNullOrWhiteSpace(dnev.Text))
             {
                 query += "dnev = @dnev, ";
                 command.Parameters.AddWithValue("@dnev", dnev.Text);
             }

             if (!string.IsNullOrWhiteSpace(dszul.Text))
             {
                 query += "dszul = @dszul, ";
                 command.Parameters.AddWithValue("@dszul", dszul.Text);
             }

             if (!string.IsNullOrWhiteSpace(dmunk.Text))
             {
                 query += "dmunk = @dmunk, ";
                 command.Parameters.AddWithValue("@dmunk", dmunk.Text);
             }

             if (!string.IsNullOrWhiteSpace(dtel.Text))
             {
                 query += "dtel = @dtel, ";
                 command.Parameters.AddWithValue("@dtel", dtel.Text);
             }

             // Remove the last comma and space
             query = query.TrimEnd(',', ' ');

             // Ha nincs egyetlen mez콈 sem kit칬ltve, akkor ne hajtsa v칠gre a m칩dos칤t치st
             if (string.IsNullOrWhiteSpace(query))
             {
                 MessageBox.Show("Nem adott meg m칩dos칤tand칩 adatokat.");
                 return;
             }

             // Ha nincs egyetlen mez콈 sem kit칬ltve, akkor ne hajtsa v칠gre a m칩dos칤t치st
             if (lista.SelectedItem == null)
             {
                 MessageBox.Show("Nincs kiv치lasztva dolgoz칩.");
                 return;
             }

             // Hozz치adja a WHERE felt칠telt a nevhez
             query += " WHERE dnev = @selectedName";
             command.Parameters.AddWithValue("@selectedName", lista.SelectedItem.ToString());

             command.CommandText = query;
             command.Connection = connection;

             int rowsAffected = command.ExecuteNonQuery();
             if (rowsAffected > 0)
             {
                 MessageBox.Show("Adatok sikeresen m칩dos칤tva.");
             }
             else
             {
                 MessageBox.Show("Nem siker칲lt m칩dos칤tani az adatokat.");
             }
         }
     }
     catch (Exception ex)
     {
         MessageBox.Show("Hiba t칬rt칠nt az adatok m칩dos칤t치sa sor치n: " + ex.Message);
     }
 }

游댯illetve csak sim치n ez legyen itt:
 private void lista_SelectionChanged(object sender, SelectionChangedEventArgs e)
 {

 }
游댯游댯游댯游댯游댯游댯游댯游댯游댯游댯游댯游댯
