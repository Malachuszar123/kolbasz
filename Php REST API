🐖mappa: htdocs-api-index.php

🐖index-php:

<?php
header('Content-Type: application/json; charset=utf-8');
header('Acces-Control-Allow-Origin: *');
require_once 'databaseconnect.php';

$params=explode('/',$_SERVER['QUERY_STRING']);

switch($params[0]){
    case "levesek":
        switch ($_SERVER["REQUEST_METHOD"]){
    case 'GET':
        $request = $conn -> query("SELECT * FROM levesek");
        $levesek = $request->fetch_all(MYSQLI_ASSOC);
        http_response_code("201");
        echo json_encode($levesek);
        break;
    
    case 'POST':
            $insert = "";
        default:
            break;
        }
        break;
    case "fogyasztas":
        switch ($_SERVER["REQUEST_METHOD"]) {
            case "POST":
                $sql = "INSERT INTO fogyasztas (adag, datum, levesekkod) VALUES (".$_HOST['adag'].", ".$_HOST['datum'].", ".$_HOST['levesekkod'].")";
                if ($conn-> query($sql)) {
                    http_response_code("201");
                }
                else
                {
                    http_response_code("401");
                }
                break;

            default:
                break;
        }
            break;
    default :
        http_response_code("401");
        break;
}

🐖databaseconnect.php:

<?php
$conn = new mysqli("localhost", "root", "", "etelek");
if ($conn -> errno) {
    echo 'Adatbázis hiba';
    die();
}
// $conn -> set_charset('utf-8');


🐖VS Code:
mappa: htdocs-api-frontend-index.html
negyzetek: thunder client le kell tölteni
new request
-POST: http://localhost/api/index.php?fogyasztas
body: 


🐖frontend mappa:
index.html: https://cdnjs.com/libraries/bootstrap
a bunde min js ÉS bootstrap min css a head-ba

🐖index.html:

<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css" integrity="sha512-jnSuA4Ss2PkkikSOLtYs8BlYIeeIK1h99ty4YfvRPAlzr377vr3CXDb7sb7eEEBYjDtcYj+AjBH3FLv5uSJuXg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.bundle.min.js" integrity="sha512-7Pi/otdlbbCR+LnW+F7PwFcSDJOuUJB3OxtEHbg4vSMvzvJjde4Po1v4BR9Gdc9aXNUNFVUY+SK51wWT8WF0Gg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="levesek.css">
    <script src="levesek.js"></script>
    <title>Beregszászi fitnesz</title>
</head>
<body>
    <div class = "container">
        <h1>Beregszászi fitnesz</h1>
    </div>
    <div id="levesek" class="row">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">'megnevezes'</h5>
                <p class="card-text">kalória: 'kaloria'</p>
                <p class="card-text">fehérje: 'feherje'</p>
                <p class="card-text">zsír: 'zsir'</p>
            </div>
        </div>
    </div>
</body>
</html>

🐖levesek.js:

const apiurl = "http://localhost/api/index.php?levesek";

document.addEventListener("DOMContentLoaded", function () {
    async function getLevesek() {
            const response = await fetch(apiurl);
            const data = await response.json();
            console.log(data);
            showLevesek(data);
    }

    function showLevesek(data) {
        let levesekHTML = "";
        for (let leves of data) {
            levesekHTML += `<div class="card">
                <div class="card-body">
                    <h5 class="card-title">${leves.megnevezes}</h5>
                    <p class="card-text">Kalória: ${leves.kaloria}</p>
                    <p class="card-text">Fehérje: ${leves.feherje}</p>
                    <p class="card-text">Zsír: ${leves.zsir}</p>
                </div>
            </div>`;
        }
        document.getElementById('levesek').innerHTML = levesekHTML;
    }

    getLevesek();
});

