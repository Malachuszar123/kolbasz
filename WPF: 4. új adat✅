🟣🟣🟣4. DG: ÚJ ADAT HOZZÁADÁSA AZ SQL TÁBLÁHOZ🟣🟣🟣

🟣ott van már az elkészített és betöltött adatok a DataGridbe. (hogyan kell? itt van: 🟡🟡🟡3. TÁBLÁZAT KIIRATÁS DATAGRIDBE🟡🟡🟡)

🟣FONTOS HOGY NEVEZD EL MEGFELELŐEN A GOMBOKAT MEG MINDEN ISTEN NYILÁT.
 <Grid>
     <Grid.Background>
         <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
             <GradientStop Color="White"/>
             <GradientStop Color="#FFFF7272" Offset="1"/>
         </LinearGradientBrush>
     </Grid.Background>
     <TextBox x:Name="nevbox" HorizontalAlignment="Left" Margin="177,125,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="231" FontSize="20" Background="White" Foreground="Black"/>
     <TextBox x:Name="nemebox" HorizontalAlignment="Left" Margin="177,162,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="231" FontSize="20"/>
     <TextBox x:Name="reszlegbox" HorizontalAlignment="Left" Margin="177,198,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="231" FontSize="20"/>
     <TextBox x:Name="belepesevbox" HorizontalAlignment="Left" Margin="177,236,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="231" FontSize="20"/>
     <TextBox x:Name="berbox" HorizontalAlignment="Left" Margin="177,270,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="231" FontSize="20"/>
     <TextBlock HorizontalAlignment="Center" Margin="0,22,0,0" TextWrapping="Wrap" VerticalAlignment="Top" FontSize="36" Width="322" TextAlignment="Center"><Run Language="hu-hu" Text="Új dolgozó felvétele"/></TextBlock>
     <TextBlock HorizontalAlignment="Left" Margin="41,125,0,0" TextWrapping="Wrap" VerticalAlignment="Top" FontSize="20"><Run Language="hu-hu" Text="Név:"/></TextBlock>
     <TextBlock HorizontalAlignment="Left" Margin="41,162,0,0" TextWrapping="Wrap" VerticalAlignment="Top" FontSize="20"><Run Language="hu-hu" Text="Neme: férfi/nő"/></TextBlock>
     <TextBlock HorizontalAlignment="Left" Margin="41,200,0,0" TextWrapping="Wrap" VerticalAlignment="Top" FontSize="20"><Run Language="hu-hu" Text="Részleg:"/></TextBlock>
     <TextBlock HorizontalAlignment="Left" Margin="41,236,0,0" TextWrapping="Wrap" VerticalAlignment="Top" FontSize="20"><Run Language="hu-hu" Text="Belépés éve:"/></TextBlock>
     <TextBlock HorizontalAlignment="Left" Margin="41,268,0,0" TextWrapping="Wrap" VerticalAlignment="Top" FontSize="20"><Run Language="hu-hu" Text="Bér:"/></TextBlock>
     <Button HorizontalAlignment="Center" Margin="0,338,0,0" VerticalAlignment="Top" FontSize="22" Language="hu-hu" Content="Hozzáad" Click="Button_Click"/>
 </Grid>

🟣Teljes kód:
using System;
using System.Collections.Generic;
using System.Data.SqlClient;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using MySql.Data.MySqlClient;

namespace vizsgaraWPF
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MySqlConnection connection;
        public MainWindow()
        {
            InitializeComponent();
            InitializeDbConn();
        }

        private void InitializeDbConn()
        {
            string connectionString = "Server=localhost; Database=dolgozok; Uid=root; Pwd=;";
            connection = new MySqlConnection(connectionString);
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            // Értékek beolvasása és típuskonverziók
            string nevValue = nevbox.Text;
            string nemeValue = nemebox.Text;
            string reszlegValue = reszlegbox.Text;
            int belepesevValue, berValue;

            // Ellenőrizzük, hogy minden mező ki van-e töltve
            if (string.IsNullOrWhiteSpace(nevbox.Text) || string.IsNullOrWhiteSpace(nemebox.Text) ||
                string.IsNullOrWhiteSpace(reszlegbox.Text) || string.IsNullOrWhiteSpace(belepesevbox.Text) ||
                string.IsNullOrWhiteSpace(berbox.Text))
            {
                MessageBox.Show("Minden mezőt ki kell tölteni.");
                return;
            }

            if (!int.TryParse(belepesevbox.Text, out belepesevValue) || !int.TryParse(berbox.Text, out berValue))
            {
                MessageBox.Show("A belépés éve és a bér mezőnek számnak kell lennie.");
                return;
            }

            try
            {
                connection.Open();

                // SQL parancs előkészítése az adatok beszúrásához //itt ez a hosszu ide az kell ami táblázatban az első sor nevei: pld fohozzavalo és @-cal elmondjuk melyik aza textbox amelyikbe írom a szöveget. tehát @fohozzavalo
                string sql = "INSERT INTO dolgozok (nev, neme, reszleg, belepesev, ber) VALUES (@nevbox, @nemebox, @reszlegbox, @belepesevbox, @berbox)";
                MySqlCommand cmd = new MySqlCommand(sql, connection);

                // Paraméterek hozzáadása a parancshoz
                cmd.Parameters.AddWithValue("@nevbox", nevValue);
                cmd.Parameters.AddWithValue("@nemebox", nemeValue);
                cmd.Parameters.AddWithValue("@reszlegbox", reszlegValue);
                cmd.Parameters.AddWithValue("@belepesevbox", belepesevValue);
                cmd.Parameters.AddWithValue("@berbox", berValue);

                // Parancs végrehajtása
                cmd.ExecuteNonQuery();
                MessageBox.Show("Adat(ok) sikeresen hozzáadva");
            }
            catch (Exception ex)
            {
                MessageBox.Show("Hiba történt az adatok mentése közben: " + ex.Message);
            }
            finally
            {
                connection.Close();
            }
        }
    }
}

🟣🟣🟣🟣🟣🟣🟣🟣🟣🟣🟣🟣
